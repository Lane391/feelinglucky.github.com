<!DOCTYPE html>
<html>
    <head>
        <title>AndroidSnipts - 11pm.co.in</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
        <link rel="stylesheet" href="/style.css" /> 
        <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" /> 
        <link rel="shortcut icon" href="/favicon.ico" />
    </head>
    <body>

    <a href="http://github.com/feelinglucky"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://a248.e.akamai.net/assets.github.com/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub"></a>

        <div id="content">
<h1 id="toc_1">Android 代码片段</h1>

<div class="toc">
<ul>
<li><a href="#toc_1">Android 代码片段</a></li>
<ul>
<li><a href="#toc_1.1">按两次退出本 Activity</a></li>
<li><a href="#toc_1.2">确定取消模态框</a></li>
</ul>
</ul>
</div>

<h2 id="toc_1.1">按两次退出本 Activity</h2>

<pre>
private long exitTime = 0;

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; event.getAction() == KeyEvent.ACTION_DOWN) {
        if((System.currentTimeMillis()-exitTime) &gt; 2000){
            Toast.makeText(getApplicationContext(), "再按一次退出程序", Toast.LENGTH_SHORT).show(); 
            exitTime = System.currentTimeMillis();
        } else{
            finish();
        }
                    
        return true;
	}
	return super.onKeyDown(keyCode, event);
}

// 如果在 ActivityGroup 中，onKeyDown 有可能无法捕获，
// 则使用 dispatchKeyEvent 方法
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    int keyCode = event.getKeyCode();
    // ...
}
</pre>


<h2 id="toc_1.2">确定取消模态框</h2>

<pre>
Builder dialog = new AlertDialog.Builder(mContext);

dialog.setTitle(DIALOG_TITLE)
      .setMessage(DIALOG_MESSAGE)
      .setIcon(android.R.drawable.ic_dialog_alert);
      
// 确定按钮事件
dialog.setPositiveButton(BUTTON_OK, 
    new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            // ...
        }
});

// 取消按钮事件
dialog.setNegativeButton(BUTTON_CANCEL, 
    new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            //...
        }
});

dialog.show();
</pre>
        </div>
        <div id="footer">
            <a id="back_index" href="/index.html">index</a>
            This page is generated by <a href="/notes/vimwiki.html">Vimwiki</a> <br />
            <!--
            This page is generated by <a href="http://vimwiki.googlecode.com/">Vimwiki</a> <br />
            -->
            2011-11-01 23:22:08
        </div>
    </body>
</html>
